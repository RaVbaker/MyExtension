
<div  role="navigation" ng-controller="MenuController as menuCtrl"    ng-init="search=false;menu=false;menu2=false">
    <!--[if IE]>

    <style>
        .navbar.footer.navbar-modal {
            width: 80%; margin-left: 20%;
        }
    </style>
    <![endif]-->
    <div class="modal fade right {{menuCtrl.menuClass}}" id="menuModal" tabindex="-1" role="dialog" aria-labelledby="menu" aria-hidden="true">
        <div class="modal-dialog">
            <nav class="navbar footer navbar-modal" >
                <div class="container-fluid menu">
                    <div style="width:90%; margin-top:50px" id="accordion">
                        <div class="menuTab">
                            <a rubedo-page-link="562f32ff45205e453512ef7a" class="menu_header"><h4>Communauté du Chemin Neuf</h4></a>
                            <span data-toggle="collapse"  href="#menuCCN" class="menuToggle glyphicon" ng-class="{'collapsed':menuCtrl.menuTab}" ng-if="menuCtrl.menuTab"></span>
                        </div>
                        <div id="menuCCN" class="collapse" ng-class="{'in':!menuCtrl.menuTab}" ng-include="rubedo.blockTemplateResolver.getTemplate('footer',{ })"></div>

                        <div class="menuTab" ng-if="menuCtrl.menuTab">
                            <a ng-href="{{menuCtrl.menu.url}}" class="menu_header">
                                <h4>{{menuCtrl.menu.text}}</h4>
                            </a>
                            <span data-toggle="collapse" href="#menuBis" class="menuToggle glyphicon"></span>
                        </div>
                        <div ng-if="menuCtrl.menuTab" class="collapse in" id="menuBis">
                            <div class="row">
                                <div class="col-md-3 col-xs-6" ng-repeat="page in menuCtrl.menu.pages track by $index">
                                    <a ng-if="!page.pages||blockConfig.menuLevel<=1" ng-href="{{page.url}}" class="capital">{{page.text}}</a>
                                    <a ng-if="page.pages&&blockConfig.menuLevel>1" class="capital">{{page.text}}</a>
                                    <a ng-repeat="subpage in page.pages track by $index" class="subpage" ng-href="{{subpage.url}}">{{subpage.text}}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="height: 100%"></div>
                </div>

            </nav>
            <div class="footer"></div>
        </div>
    </div>

    <nav class="navbar-fixed-top">
        <div class="container-fluid">
            <ul class="nav navbar-nav navbar-right">
                <li ng-click="search=!search" class="cursor-as-pointer">
                    <span class="glyphicon glyphicon-search" style="font-size:1.2em"></span>
                </li>
                <li class="cursor-as-pointer" ng-click="menuCtrl.showMenu()">
                    menu
                    <div id="nav-icon4">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </li>

                <li>
                    <span ng-init='blockConfig="displayMode":"button","cartDetailPage":"55c8777145205ef317c62e2d","checkoutPage":"55c8ac3545205e972cc62e12"'></span>
                    <p>ici, en 2016, votre panier</p><!--<span ng-include="rubedo.blockTemplateResolver.getTemplate(block.bType,blockConfig)"></span>-->
                    <div ng-controller="ShoppingCartController as shoppingCartCtrl">
                        <div class="btn-group" ng-if="blockConfig.displayMode=='button'">
                            <button ng-if="shoppingCartCtrl.cartIsEmpty" type="button" class="btn btn-default">
                                <span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span>
                                {{ rubedo.translate('Label.Empty')}}
                            </button>
                            <button ng-if="!shoppingCartCtrl.cartIsEmpty" type="button" class="btn btn-default">
                                <span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span>
                                <span class="badge">{{shoppingCartCtrl.detailedCart.totalItems}} </span>
                                <span ng-show="shoppingCartCtrl.detailedCart.totalItems>1"> {{ rubedo.translate('Label.Items')}}</span>
                                <span ng-show="shoppingCartCtrl.detailedCart.totalItems==1"> {{ rubedo.translate('Label.Item')}}</span>
                            </button>
                            <button ng-if="!shoppingCartCtrl.cartIsEmpty" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                <span class="caret"></span>
                                <span class="sr-only">{{ rubedo.translate('Block.Auth.ToggleDropdown')}}</span>
                            </button>
                            <ul ng-if="!shoppingCartCtrl.cartIsEmpty" class="dropdown-menu" role="menu">
                                <table class="table">
                                    <tr ng-repeat="row in shoppingCartCtrl.detailedCart.cart track by $index">
                                        <td>{{row.title}}&nbsp;<small>{{row.subtitle}}</small></td>
                                        <td>x&nbsp;{{row.amount}}</td>
                                        <td><span
                                                class="glyphicon glyphicon-plus cursor-as-pointer"
                                                aria-hidden="true"
                                                ng-click="shoppingCartCtrl.addToCart(row.productId.$id,row.variationId.$id,1); $event.stopPropagation();"></span></td>
                                        <td><span
                                                class="glyphicon glyphicon-minus cursor-as-pointer"
                                                aria-hidden="true"
                                                ng-click="shoppingCartCtrl.removeFromCart(row.productId.$id,row.variationId.$id,1); $event.stopPropagation();"></span></td>
                                        <td>{{row.taxedPrice | number : 2}}&nbsp;€</td>
                                        <td><span
                                                class="glyphicon glyphicon-remove cursor-as-pointer"
                                                aria-hidden="true"
                                                ng-click="shoppingCartCtrl.removeFromCart(row.productId.$id,row.variationId.$id,row.amount); $event.stopPropagation();"></span></td>
                                    </tr>
                                </table>
                                <h5><strong>{{ rubedo.translate('Blocks.ShoppingCart.Total')}}</strong> : {{shoppingCartCtrl.detailedCart.totalTaxedPrice | number :2}} €</h5>
                                <a ng-if="shoppingCartCtrl.checkoutPageUrl"
                                   ng-href="{{shoppingCartCtrl.checkoutPageUrl}}">
                                    <button class="btn btn-primary">{{ rubedo.translate('Label.Checkout')}}</button>
                                </a>
                                <a ng-if="shoppingCartCtrl.cartDetailPageUrl"
                                   ng-href="{{shoppingCartCtrl.cartDetailPageUrl}}">
                                    <button class="btn btn-primary">{{ rubedo.translate('Blocks.ShoppingCart.ViewCart')}}</button>
                                </a>
                            </ul>
                        </div>
                        <div class="panel panel-default" ng-if="blockConfig.displayMode=='detail'">
                            <div class="panel-heading"><strong>{{ rubedo.translate('Label.ShoppingCart')}}</strong>
                                <span ng-if="!shoppingCartCtrl.cartIsEmpty" class="badge"> {{shoppingCartCtrl.detailedCart.totalItems}} </span>
                                <span ng-if="!shoppingCartCtrl.cartIsEmpty" ng-show="shoppingCartCtrl.detailedCart.totalItems>1"> {{ rubedo.translate('Label.Items')}}</span>
                                <span ng-if="!shoppingCartCtrl.cartIsEmpty" ng-show="shoppingCartCtrl.detailedCart.totalItems==1"> {{ rubedo.translate('Label.Item')}}</span>
                            </div>
                            <div ng-if="shoppingCartCtrl.cartIsEmpty" class="panel-body" >
                                <div class="alert alert-warning" role="alert">{{ rubedo.translate('Blocks.ShoppingCart.CartIsEmpty')}}</div>
                            </div>
                            <table ng-if="!shoppingCartCtrl.cartIsEmpty" class="table table-striped table-hover">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>{{ rubedo.translate('Blocks.ShoppingCart.Label.Name')}}</th>
                                    <th>{{ rubedo.translate('Blocks.ShoppingCart.Label.UnitPrice')}}</th>
                                    <th>{{ rubedo.translate('Blocks.ShoppingCart.Label.Number')}}</th>
                                    <th>{{ rubedo.translate('Blocks.ShoppingCart.Label.AddRemove')}}</th>
                                    <th>{{ rubedo.translate('Blocks.ShoppingCart.Label.Price')}}</th>
                                    <th>{{ rubedo.translate('Blocks.ShoppingCart.Label.Delete')}}</th>
                                </tr>
                                </thead>
                                <tr ng-repeat="row in shoppingCartCtrl.detailedCart.cart track by $index">
                                    <td>
                                        <img class="img-responsive" ng-if="row.image"
                                             ng-src="{{rubedo.imageUrl.getUrlByMediaId(row.image,{size:'thumbnail'}) }}"
                                             alt="{{ row.title }}"
                                        />
                                    </td>
                                    <td>
                                        {{row.title}}&nbsp;<small>{{row.subtitle}}</small>
                                    </td>
                                    <td>{{row.unitTaxedPrice | number : 2}} €</td>
                                    <td>x&nbsp;{{row.amount}}</td>
                                    <td><span
                                            class="glyphicon glyphicon-plus cursor-as-pointer"
                                            aria-hidden="true"
                                            ng-click="shoppingCartCtrl.addToCart(row.productId.$id,row.variationId.$id,1); $event.stopPropagation();"></span>&nbsp;
                <span
                        class="glyphicon glyphicon-minus cursor-as-pointer"
                        aria-hidden="true"
                        ng-click="shoppingCartCtrl.removeFromCart(row.productId.$id,row.variationId.$id,1); $event.stopPropagation();"></span></td>
                                    <td>{{row.taxedPrice | number : 2}}&nbsp;€</td>
                                    <td><span
                                            class="glyphicon glyphicon-remove cursor-as-pointer"
                                            aria-hidden="true"
                                            ng-click="shoppingCartCtrl.removeFromCart(row.productId.$id,row.variationId.$id,row.amount); $event.stopPropagation();"></span></td>
                                </tr>
                            </table>
                            <div ng-if="!shoppingCartCtrl.cartIsEmpty" class="panel-body text-right">
                                <h5><strong>{{ rubedo.translate('Blocks.ShoppingCart.Total')}}</strong> : {{shoppingCartCtrl.detailedCart.totalTaxedPrice | number :2}} €</h5>
                                <a ng-if="shoppingCartCtrl.checkoutPageUrl"
                                   ng-href="{{shoppingCartCtrl.checkoutPageUrl}}">
                                    <button class="btn btn-primary">{{ rubedo.translate('Label.Checkout')}}</button>
                                </a>
                            </div>
                        </div>
                    </div>
                </li>

                <li>
                    <span style="line-height:1em"><a href="http://www.chemin-neuf.fr/aidez-nous/faire-un-don">Faire un don</a></span>
                </li>

            </ul>
        </div>
        <div class="container-fluid searchbar"ng-class="{'displayed':search}">
            <div class="navbar-nav navbar-right" >
                <form ng-if="menuCtrl.searchEnabled" ng-submit="menuCtrl.onSubmit()"role="form">
                    <div class="input-group">
                        <input class="form-control" type="text" ng-model="menuCtrl.query" ng-attr-placeholder="{{rubedo.translate('Search.Label.Search','Search')}}"/>
                                    <span class="input-group-btn"><button class="btn btn-default" type="submit">
                                        <span class="glyphicon glyphicon-search"></span></button></span>
                    </div>
                </form>
            </div>
        </div>
    </nav>





</div>
